<section head></section>
<!-- <section id="loading-error" loading-error></section>
<section id="loading-spinner" loading-spinner></section> -->
<div data-ng-controller="createUserController">
    <section id="floorplanpage">
        <div class="row-fluid">
            <div class="span6">
                <div class="jdash-header">User Table</div>
                <div class="box" style="background-color:#FFF;"> 
                    <table class="listUser">
                        <tr style="font-weight:bold">
                            <td>Email</td><td ng-show="global.user.user_level === 'superadmin'">Database</td><td>User Level</td><td></td><td></td>
                        </tr>
                        <tr ng-repeat="user in users">
                            <td><span>{{user.email}}</span></td>
                            <td ng-show="global.user.user_level === 'superadmin'"><span>{{user.database}}</span></td>
                            <td><span>{{user.user_level}}</span></td>
                            <td><button type="button" class="button-error pure-button" ng-click="deleteUser(user)">Delete</button></td>
                            <td ng-click="editUser(user)" style="cursor:pointer"><svg height="30" width="30"><path transform="translate(0,6)" style="fill:#555555;" d="M15.3,16c0.6,0,1.2,0.1,1.7,0.4c0.7-0.8,1.2-1.8,1.6-2.8c-1.4-0.6-2.3-2-2.3-3.6c0-1.6,1-3,2.3-3.6c-0.4-1-0.9-2-1.6-2.8C16.5,3.9,15.9,4,15.3,4c-2.1,0-3.9-1.7-4-3.8C10.7,0.1,10,0,9.3,0s-1.4,0.1-2,0.2C7.2,2.3,5.5,4,3.3,4C2.7,4,2.1,3.9,1.6,3.6C0.9,4.4,0.4,5.4,0,6.4C1.4,7,2.3,8.4,2.3,10c0,1.6-1,3-2.3,3.6c0.4,1,0.9,2,1.6,2.8C2.1,16.1,2.7,16,3.3,16c2.1,0,3.9,1.7,4,3.8c0.7,0.1,1.3,0.2,2,0.2s1.4-0.1,2-0.2C11.4,17.7,13.2,16,15.3,16zM5.3,10c0-2.2,1.8-4,4-4s4,1.8,4,4c0,2.2-1.8,4-4,4S5.3,12.2,5.3,10z"/></span></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="span2">
                <div class="jdash-header" ng-hide="showEdit">Create User</div>
                <div class="jdash-header" ng-show="showEdit">Edit User</div>
                <div class="box" style="background-color:#FFF;"> 
                    <form name="createUser" > 
                        <div ng-init="setForm(createUser);">
                            <label class="formLabel">Email:</label> <input required type="email" ng-model="createUser.email" ng-disabled="showEdit">
                            <label class="formLabel">Username:</label> <input required type="text" ng-model="createUser.username">
                            <label class="formLabel">Password:</label> <input required type="password" ng-model="createUser.password">
                            <label class="formLabel">Re-Type Password:</label> <input required type="password" ng-model="createUser.password2">
                            <div ng-show="createUser.password != createUser.password2" class="redMismatch">Passwords do not match!</div>
                            <br />
                            <div ng-show="global.user.user_level === 'superadmin'">
                                <label class="formLabel">Database:</label>    
                                <select ng-model="createUser.database" >
                                    <option value="{{db}}" ng-repeat="db in databases">{{db}}</option>
                                </select><br />
                            </div>
                            <label class="formLabel">User Level:</label>    
                                <select ng-model="createUser.user_level" required>
                                    <option value="superadmin" ng-show="global.user.user_level === 'superadmin'">Super Admin</option>
                                    <option value="admin" ng-show="global.user.user_level === 'admin' || global.user.user_level === 'superadmin'">Admin</option>
                                    <option value="user">User</option>
                                </select><br /> 
                            <br />
                            <input type="submit" ng-click="createUsers(createUser)" ng-hide="showEdit" class="pure-button"> 
                            <input type="submit" ng-click="submitEditUser(createUser)" ng-show="showEdit" class="pure-button"> 
                        </div>
                    </form>
                </div>
            </div>
            <div class="span2" ng-show="showEdit">
                <div class="jdash-header">Content Access</div> 
                <div class="box" style="background-color:#FFF;"> 
                    <form name="createUser" id="accessLevel" > 
                        <label class="formLabel">Hide Stealth:</label>  <input type="checkbox" ng-model="createUser.hide_stealth" ng-checked="createUser.hide_stealth" ><br />
                        <label class="formLabel">Hide Proxy Block:</label> <input type="checkbox" ng-model="createUser.hide_proxy" ng-checked="createUser.hide_proxy" >
                        <br /><br />
                        <input type="submit" value="save" ng-click="setAccessInfo(createUser)" class="pure-button"> 
                    </form>
                </div>
            </div>
        </div>
    </section>
</div>
